<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini Royale MAX</title>
<style>
body{margin:0;background:#0b1020;color:white;font-family:Arial;text-align:center}
#arena{position:relative;width:720px;height:360px;margin:auto;background:#2a2e6f;border:4px solid white}
.lane{position:absolute;width:100%;height:50%}
#top{top:0} #bot{bottom:0}
.tower{position:absolute;width:50px;height:120px;top:120px}
#pt{left:10px;background:green}
#et{right:10px;background:red}
.hp{position:absolute;top:-8px;width:50px;height:6px;background:#400}
.hpi{height:100%;background:lime}
.troop{position:absolute;width:20px;height:20px;border-radius:4px}
.player{background:yellow}
.enemy{background:orange}
.ranged{background:cyan}
.flying{background:violet}
.arrow{position:absolute;width:8px;height:2px;background:white}
#elixir{width:220px;height:10px;background:#555;margin:10px auto}
#elixirFill{height:100%;background:purple}
.card{padding:6px;margin:3px}
@media(max-width:800px){#arena{width:95%}}
</style>
</head>

<body>

<h2>‚öîÔ∏è Mini Royale MAX</h2>

<div id="arena">
  <div id="top" class="lane"></div>
  <div id="bot" class="lane"></div>

  <div id="pt" class="tower">
    <div class="hp"><div id="pHP" class="hpi"></div></div>
  </div>
  <div id="et" class="tower">
    <div class="hp"><div id="eHP" class="hpi"></div></div>
  </div>
</div>

<div id="elixir"><div id="elixirFill"></div></div>

<div>
<button class="card" onclick="play('knight')">üó° Knight (3)</button>
<button class="card" onclick="play('archer')">üèπ Archer (3)</button>
<button class="card" onclick="play('runner')">‚ö° Runner (2)</button>
<button class="card" onclick="play('tank')">üõ° Tank (5)</button>
<button class="card" onclick="play('dragon')">üê≤ Dragon (4)</button>
<button class="card" onclick="spell()">üî• Spell (4)</button>
</div>

<script>
let elixir=10,pHP=100,eHP=100;
const troops={
 knight:{hp:35,dmg:6,speed:2,cost:3},
 runner:{hp:18,dmg:3,speed:4,cost:2},
 tank:{hp:80,dmg:5,speed:1,cost:5},
 archer:{hp:20,dmg:4,speed:2,cost:3,ranged:true},
 dragon:{hp:45,dmg:5,speed:2,cost:4,flying:true}
};

function update(){
 elixir=Math.min(elixir,10);
 elixirFill.style.width=(elixir*10)+"%";
 pHPBar.style.width=pHP+"%";
 eHPBar.style.width=eHP+"%";
}
const pHPBar=document.getElementById("pHP");
const eHPBar=document.getElementById("eHP");

function y(l){return l==="top"?90:240}

function play(t){
 if(elixir<troops[t].cost) return;
 elixir-=troops[t].cost;
 spawn(t,"player",70,Math.random()>0.5?"top":"bot");
}

function spawn(type,team,x,lane){
 const tr=document.createElement("div");
 tr.className=`troop ${team} ${troops[type].ranged?"ranged":""} ${troops[type].flying?"flying":""}`;
 tr.style.left=x+"px";
 tr.style.top=y(lane)+"px";
 arena.appendChild(tr);

 let pos=x,hp=troops[type].hp;
 const move=setInterval(()=>{
  pos+=team==="player"?troops[type].speed:-troops[type].speed;
  tr.style.left=pos+"px";

  if(troops[type].ranged && Math.random()<0.02){
    shoot(pos,lane,team);
  }

  if(team==="player"&&pos>640){eHP-=troops[type].dmg;end()}
  if(team==="enemy"&&pos<50){pHP-=troops[type].dmg;end()}
 },30);

 function end(){
  clearInterval(move); tr.remove(); check();
 }
}

function shoot(x,lane,team){
 const a=document.createElement("div");
 a.className="arrow";
 a.style.left=x+"px";
 a.style.top=y(lane)+8+"px";
 arena.appendChild(a);
 let p=x;
 const s=setInterval(()=>{
  p+=team==="player"?6:-6;
  a.style.left=p+"px";
  if(p<40||p>680){clearInterval(s);a.remove()}
 },30);
 beep();
}

function spell(){
 if(elixir<4) return;
 elixir-=4;
 eHP-=20;
 flash();
 beep();
 check();
}

function flash(){
 arena.style.background="#aa3333";
 setTimeout(()=>arena.style.background="#2a2e6f",200);
}

function check(){
 update();
 if(eHP<=0){alert("üèÜ YOU WIN");location.reload()}
 if(pHP<=0){alert("üíÄ YOU LOSE");location.reload()}
}

function beep(){
 const a=new AudioContext(),o=a.createOscillator();
 o.connect(a.destination);o.start();
 setTimeout(()=>o.stop(),100);
}

// Elixir regen
setInterval(()=>{elixir++;update()},1000);

// Enemy AI
setInterval(()=>{
 const k=Object.keys(troops);
 const t=k[Math.floor(Math.random()*k.length)];
 spawn(t,"enemy",650,Math.random()>0.5?"top":"bot");
},2300);

update();
</script>

</body>
</html>
