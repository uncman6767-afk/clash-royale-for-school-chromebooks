<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Royale Arena (Original)</title>
<style>
body{margin:0;background:#0e1230;color:white;font-family:Arial;text-align:center}
#arena{position:relative;width:720px;height:360px;margin:auto;background:#2b2f7a;border:4px solid #fff}
.lane{position:absolute;width:100%;height:50%}
#top{top:0} #bot{bottom:0}

.tower{position:absolute;width:50px;height:120px;top:120px}
#pt{left:10px;background:#2ecc71}
#et{right:10px;background:#e74c3c}

.hp{position:absolute;top:-8px;width:50px;height:6px;background:#400}
.hpi{height:100%;background:#0f0}

.unit{position:absolute;width:20px;height:20px;border-radius:4px}
.player{background:#f1c40f}
.enemy{background:#e67e22}
.ranged{background:#5dade2}
.flying{background:#af7ac5}

#elixir{width:220px;height:10px;background:#555;margin:8px auto}
#elixirFill{height:100%;background:#8e44ad}

#hand{display:flex;justify-content:center;margin-top:6px}
.card{background:#222;padding:6px 10px;margin:4px;border:1px solid #999;cursor:pointer}
.card.off{opacity:.4}

#msg{margin:6px;font-weight:bold}
</style>
</head>

<body>

<h2>‚öîÔ∏è Royale Arena (Original)</h2>
<div id="msg"></div>

<div id="arena">
  <div id="top" class="lane"></div>
  <div id="bot" class="lane"></div>

  <div id="pt" class="tower"><div class="hp"><div id="pHP" class="hpi"></div></div></div>
  <div id="et" class="tower"><div class="hp"><div id="eHP" class="hpi"></div></div></div>
</div>

<div id="elixir"><div id="elixirFill"></div></div>

<div id="hand"></div>

<script>
/* ================= CORE DATA ================= */
let elixir=10, pHP=100, eHP=100;
let overtime=false;

const units={
 warrior:{hp:40,dmg:6,speed:1.8,cost:3},
 scout:{hp:20,dmg:4,speed:3,cost:2},
 guard:{hp:90,dmg:5,speed:1,cost:5},
 archer:{hp:25,dmg:5,speed:1.6,cost:3,ranged:true},
 drake:{hp:50,dmg:6,speed:2,cost:4,flying:true}
};

let deck=["warrior","archer","scout","guard","drake"];
let hand=deck.slice(0,4);
let queue=deck.slice(4);

/* ================= UI ================= */
function updateUI(){
 elixir=Math.min(elixir,10);
 elixirFill.style.width=(elixir*10)+"%";
 pHPBar.style.width=pHP+"%";
 eHPBar.style.width=eHP+"%";
 drawHand();
}
const pHPBar=document.getElementById("pHP");
const eHPBar=document.getElementById("eHP");

function drawHand(){
 const h=document.getElementById("hand");
 h.innerHTML="";
 hand.forEach(c=>{
   const b=document.createElement("div");
   b.className="card"+(elixir<units[c].cost?" off":"");
   b.textContent=c+" ("+units[c].cost+")";
   b.onclick=()=>selectCard(c);
   h.appendChild(b);
 });
}

/* ================= GAMEPLAY ================= */
let selected=null;
function selectCard(c){
 if(elixir<units[c].cost) return;
 selected=c;
 msg.textContent="Click TOP or BOTTOM lane";
}

arena.onclick=e=>{
 if(!selected) return;
 const lane=e.offsetY<180?"top":"bot";
 deploy(selected,lane);
 rotateHand(selected);
 selected=null;
 msg.textContent="";
};

function rotateHand(card){
 const i=hand.indexOf(card);
 hand.splice(i,1);
 hand.push(queue.shift());
 queue.push(card);
}

function y(l){return l==="top"?90:240}

function deploy(type,lane){
 elixir-=units[type].cost;
 spawn(type,"player",70,lane);
}

function spawn(type,team,x,lane){
 const u=document.createElement("div");
 u.className=`unit ${team} ${units[type].ranged?"ranged":""} ${units[type].flying?"flying":""}`;
 u.style.left=x+"px";
 u.style.top=y(lane)+"px";
 arena.appendChild(u);

 let pos=x,hp=units[type].hp;

 const move=setInterval(()=>{
  pos+=team==="player"?units[type].speed:-units[type].speed;
  u.style.left=pos+"px";

  if(team==="player"&&pos>640){eHP-=units[type].dmg;end()}
  if(team==="enemy"&&pos<50){pHP-=units[type].dmg;end()}
 },30);

 function end(){
  clearInterval(move);
  u.remove();
  check();
 }
}

/* ================= SPELL ================= */
function spell(){
 if(elixir<4) return;
 elixir-=4;
 eHP-=18;
 flash();
 check();
}

/* ================= SYSTEMS ================= */
function check(){
 updateUI();
 if(eHP<=0){alert("üèÜ VICTORY");location.reload()}
 if(pHP<=0){alert("üíÄ DEFEAT");location.reload()}
}

function flash(){
 arena.style.background="#992222";
 setTimeout(()=>arena.style.background="#2b2f7a",150);
}

/* ================= TIMERS ================= */
// Elixir regen
setInterval(()=>{
 elixir+=overtime?2:1;
 updateUI();
},1000);

// Enemy AI
setInterval(()=>{
 const k=Object.keys(units);
 const t=k[Math.floor(Math.random()*k.length)];
 spawn(t,"enemy",650,Math.random()>0.5?"top":"bot");
},2200);

// Overtime
setTimeout(()=>{
 overtime=true;
 msg.textContent="‚è±Ô∏è OVERTIME!";
},90000);

updateUI();
</script>

</body>
</html>
